var t=["January","February","March","April","May","June","July","August","September","October","November","December"],e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],n={century:31536e8,decade:31536e7,year:31536e6,quarter:7884e6,month:2592e6,week:6048e5,day:864e5,hour:36e5,"5min":3e5,minute:6e4,"5sec":5e3,second:1e3,"50ms":50,ms:1};var i=-59011466152e3,s=325036692e5;function a(t,e,n){var i;return function(){var s=this,a=arguments,r=function(){i=null,n||t.apply(s,a)},o=n&&!i;clearTimeout(i),i=setTimeout(r,e),o&&t.apply(s,a)}}function r(t,e){if(null==t)return e;for(var n in e)void 0===t[n]&&(t[n]=e[n]);return t}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function o(t,e,n){if(n||2===arguments.length)for(var i,s=0,a=e.length;s<a;s++)!i&&s in e||(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))}var h={isEnabled:!0,playingStep:50,playingPeriod:1350,zoomingStep:50,graphInclusionType:0,statsInclusionType:0,isHideDisconnectedNodesOnAnim:!1,globalRangeMin:-59011466152e3,globalRangeMax:325036692e5,isMaintainGraphRange:!1,graphRangeRatio:.33,defaultBeginDate:-6311592e5,defaultEndDate:25245972e5,isIgnoreElemChanges:!1},l=[{name:"# nodes",incrementFn:function(t){return t.isNode()?1:0},color:"#FF0000"},{name:"# edges",incrementFn:function(t){return t.isEdge()?1:0},color:"#0000FF"}],g={maintainFiltering:function(t){return t},showOnlyElems:function(t,e){var n=window.cy.$().not(t);t.style("visibility","visible"),n.style("visibility","hidden")},chartRendered:function(){},statsRangeChanged:function(){},graphRangeChanged:function(){},onMouseOverChart:function(){},onMouseOutChart:function(){}},c=function(){function t(t,e,n,i,s){this.textStyle={fontSize:11,fontName:"Arial"},this.isReady=!1,this.isHoverChartBinded=!1,this.rangeChange=a(t,500,!1).bind(this),this.htmlElem=e,this.colors=n,this.onMouseOverChart=i,this.onMouseOutChart=s}return t.prototype.load=function(t){var e=this;setTimeout((function(){var n=document.createElement("script");n.onload=function(){google.charts.load("46",{packages:["corechart","controls"]}),google.charts.setOnLoadCallback((function(){e.initChart(t)}))},n.src="https://www.gstatic.com/charts/loader.js",document.head.appendChild(n)}),200)},t.prototype.initChart=function(t){var e=this,n=new google.visualization.Dashboard,a=new google.visualization.ControlWrapper({controlType:"ChartRangeFilter",containerId:this.htmlElem.controllerElemId,options:{filterColumnIndex:0,ui:{chartType:"LineChart",chartOptions:{colors:this.colors,enableInteractivity:!1,chartArea:{left:5,right:5,bottom:0},legend:"none",hAxis:{textStyle:this.textStyle},vAxis:{textPosition:"none",gridlines:{color:"none"}}},snapToData:!1}}}),r=new google.visualization.ChartWrapper({chartType:"ColumnChart",containerId:this.htmlElem.chartElemId,options:{legend:{textStyle:this.textStyle},tooltip:{isHtml:!0},hAxis:{textStyle:this.textStyle,textPosition:"in"},vAxis:{textStyle:this.textStyle},chartArea:{left:20,top:7,bottom:25},colors:this.colors}});n.bind(a,r),this.dashboard=n,this.chartWrapper=r,this.controlWrapper=a,window.controlWrapper=a,window.chartWrapper=r,this.isReady=!0,this.setControllerRange(i,s,!1),this.removeListener(),this.addListener(),t();var o=google.visualization.events;o.addListener(r,"ready",(function(){if(!e.isHoverChartBinded){e.isHoverChartBinded=!0;var t=r.getChart();o.addListener(t,"onmouseover",(function(t){var n=e.chartWrapper.getDataTable().Dl;t&&"number"==typeof t.row&&(t.row=t.row+n[0],t.column=Math.floor(t.column/2),e.onMouseOverChart(t))})),o.addListener(t,"onmouseout",(function(t){var n=e.chartWrapper.getDataTable().Dl;t&&"number"==typeof t.row&&(t.row=t.row+n[0],t.column=Math.floor(t.column/2),e.onMouseOutChart(t))}))}}))},t.prototype.setControllerRange=function(t,e,n){if(void 0===n&&(n=!0),this.isReady){if(!t||!e){var i=this.getControllerRange(),s=i[0],a=i[1];t||(t=s),e||(e=a)}if(!(t>=e))return this.controlWrapper.setState({range:{start:new Date(t),end:new Date(e)}}),n&&this.controlWrapper.draw(),0;console.log("can not set start > end ")}},t.prototype.getControllerRange=function(){if(!this.isReady)return[i,s];var t=this.controlWrapper.getState(),e=i,n=s;return t&&t.range&&(t.range.start&&t.range.start.getTime&&(e=t.range.start.getTime()),t.range.end&&t.range.end.getTime&&(n=t.range.end.getTime())),[e,n]},t.prototype.setTicksForBarChart=function(t){this.isReady&&(this.chartWrapper.setOption("hAxis.ticks",t),this.controlWrapper.draw())},t.prototype.setColors=function(){if(this.chartWrapper&&this.controlWrapper&&this.isReady){for(var t=0;t<this.colors.length;t++)this.colors[t]||(this.colors[t]="#000000");this.chartWrapper.setOption("colors",this.colors),this.controlWrapper.setOption("ui.chartOptions.colors",this.colors)}},t.prototype.drawDashboard=function(t){if(this.isReady){var e=google.visualization.arrayToDataTable(t,!1);this.dashboard.draw(e)}},t.prototype.drawControl=function(){this.isReady&&this.controlWrapper.draw()},t.prototype.removeListener=function(){window.google&&google.visualization.events.removeListener(this.googleEvent)},t.prototype.addListener=function(){window.google&&(this.googleEvent=google.visualization.events.addListener(this.controlWrapper,"statechange",this.rangeChange))},t}(),u=function(){function u(t,e,n,i,s){var a=this;this.cyElemChangeHandler=null,this.statsRange1=0,this.statsRange2=0,this.items=[],this.minDate=0,this.maxDate=0,this.graphDates=[],this.cursorPos=0,this.sampleCount=100,this.playTimerId=-1,this.IDEAL_SAMPLE_CNT=60,this.MIN_ZOOM_RANGE=10,this.currTimeUnit=36e5,this.selectedTimeUnit="century",this.beginPropertyName="begin_datetime",this.endPropertyName="end_datetime",this.setStatsRangeStrFn=null,this.setGraphRangeStrFn=null,this.GRAPH_RANGE_RATIO_MIN=.2,this.GRAPH_RANGE_RATIO_MAX=.8,this.ignoreEndNodesForEdgeInclusion=!0,this.isChartClientReady=!1,this.cy=t,this.dataMapping=e,this.htmlElem=n,this.settings=r(i,h),this.settings.events=r(i.events,g),this.stat2elem={},this.setGraphRangeRatio(this.settings.graphRangeRatio),i.stats||(this.settings.stats=l),this.api=s,this.chartClient=new c(this.rangeChange.bind(this),n,this.settings.stats.map((function(t){return t.color})),(function(t){t.row&&a.settings.events.onMouseOverChart(a.stat2elem[t.row][t.column])}),(function(t){t.row&&a.settings.events.onMouseOutChart(a.stat2elem[t.row][t.column])})),this.chartClient.load(this.cyElemListChanged.bind(this)),this.unbindCommands(),this.bindCommands(),this.unbindEventListeners(),this.bindEventListeners()}return u.prototype.cyElemListChanged=function(){if(this.settings.isEnabled&&!this.settings.isIgnoreElemChanges){var t=this.cy.$().map((function(t){return t}));this.items=[];for(var e=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER,i=0;i<t.length;i++){var s=this.getTimeRange(t[i]),a=s[0],r=s[1];n=Math.max(n,a,r),e=Math.min(e,a,r),this.items.push({start:a,end:r,cyElem:t[i]})}this.items.length<1?this.drawEmptyData():(this.prepareChartData(e,n),this.settings.isMaintainGraphRange?(this.renderChart(),this.setStatsRangeByRatio(),this.api._.rangeChange()):this.api.coverVisibleRange())}},u.prototype.drawEmptyData=function(){this.chartClient.drawDashboard([["instance no","#"],[new Date,0]])},u.prototype.getStatsForRange=function(t,e,n){var i,s=this.settings.statsInclusionType,a=this.items,r=this.settings.stats,o=function(t){return t.cyElem.data("collapsedEdges")||t.cyElem.data("collapsedChildren")},h=function(t){return!0};1==s?h=function(n){return n.start>=t&&n.start<=e}:2==s?h=function(n){return(n.start+n.end)/2>=t&&(n.start+n.end)/2<=e}:3==s?h=function(n){return n.end>=t&&n.end<=e}:0==s&&(h=function(n){return n.start<=e&&n.end>=t}),i=a.filter((function(t){return h(t)||o(t)}));for(var l=new Array(r.length).fill(0),g=0;g<r.length;g++)for(var c=0;c<i.length;c++)this.count4Collapsed(i[c],r[g],l,g,n,h,o);return l},u.prototype.count4Collapsed=function(t,e,n,i,s,a,r){var o=this,h=function(t){var e=o.getTimeRange(t);return{start:e[0],end:e[1],cyElem:t}},l=function(t){var a=e.incrementFn(t);a>0&&function(t,e,n,i){t[n]||(t[n]={}),t[n][i]||(t[n][i]=[]),t[n][i].push(e)}(o.stat2elem,t.id(),s,i),n[i]+=a};if(r(t)){var g=t.cyElem.data("collapsedEdges");if(g)for(var c=0;c<g.length;c++){r(p=h(g[c]))?this.count4Collapsed(p,e,n,i,s,a,r):a(p)&&l(g[c])}else{var u=function(t){return t.cyElem.data("collapsedChildren")}(t);for(c=0;c<u.length;c++){var p;r(p=h(u[c]))?this.count4Collapsed(p,e,n,i,s,a,r):a(p)&&l(u[c])}}}else l(t.cyElem)},u.prototype.getTimeRange=function(t){var e=t.classes().map((function(t){return t.toLowerCase()}));if(!this.dataMapping)return[this.settings.defaultBeginDate,this.settings.defaultEndDate];var n=t.children(),i=t.data("collapsedEdges");i&&(n=n.union(i));var s=t.data("collapsedChildren");if(s&&(n=n.union(s)),n.length>0){for(var a=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,o=0;o<n.length;o++){var h=this.getTimeRange(n[o]),l=h[0],g=h[1];l<a&&(a=l),g>r&&(r=g)}return[a,r]}var c=function(n){if(-1===e.findIndex((function(t){return t==n.toLowerCase()})))return"continue";var i=u.dataMapping[n][u.beginPropertyName],s=u.dataMapping[n][u.endPropertyName],a=t.data()[i],r=t.data()[s];return a&&r?{value:[a,r]}:a&&!r?{value:[a,u.settings.defaultEndDate]}:!a&&r?{value:[u.settings.defaultBeginDate,r]}:{value:[u.settings.defaultBeginDate,u.settings.defaultEndDate]}},u=this;for(var p in this.dataMapping){var d=c(p);if("object"==typeof d)return d.value}return[this.settings.defaultBeginDate,this.settings.defaultEndDate]},u.prototype.getTimeFilteredGraphElems=function(t,e){var n=this.cy.collection(),i=[];0==this.settings.graphInclusionType?i=this.items.filter((function(n){return n.start<=e&&n.end>=t})).map((function(t){return t.cyElem})):1==this.settings.graphInclusionType?i=this.items.filter((function(n){return t<=n.start&&e>=n.end})).map((function(t){return t.cyElem})):2==this.settings.graphInclusionType&&(i=this.items.filter((function(n){return n.start<=t&&n.end>=e})).map((function(t){return t.cyElem})));for(var s=0;s<i.length;s++)n=n.union(i[s]);return this.ignoreEndNodesForEdgeInclusion&&(n=n.union(n.edges().connectedNodes())),n},u.prototype.putStatDataForRange=function(t,e,n,i){var s=this.getStatsForRange(t,e,i.length-1);i.push(o([new Date(n)],this.getToolTippedData.call(this,t,s),!0)),this.graphDates.push(n)},u.prototype.getVisibleRange=function(){for(var t=this.cy.filter((function(t){return t.visible()})).map((function(t){return t})),e=i,n=s,a=0;a<t.length;a++){var r=this.getTimeRange(t[a]),o=r[0],h=r[1];o<n&&(n=o),h>e&&(e=h)}return n===s?[i,s]:[n,e]},u.prototype.bindEventListeners=function(){this.cyElemChangeHandler=a(this.cyElemListChanged,200,!1).bind(this),this.cy.on("add remove",this.cyElemChangeHandler),this.windowResizer=a(this.renderChart,200,!1).bind(this),window.addEventListener("resize",this.windowResizer)},u.prototype.unbindEventListeners=function(){this.cyElemChangeHandler&&this.cy.off("add remove",this.cyElemChangeHandler),this.windowResizer&&window.removeEventListener("resize",this.windowResizer)},u.prototype.bindCommands=function(){var t,e=this;this.zoomFn=function(t){e.api.changeZoom(t.deltaY<0)},null===(t=document.getElementById(this.htmlElem.controllerElemId))||void 0===t||t.addEventListener("wheel",this.zoomFn)},u.prototype.addChartListener=function(){this.chartClient.addListener()},u.prototype.removeChartListener=function(){this.chartClient.removeListener()},u.prototype.unbindCommands=function(){var t;null===(t=document.getElementById(this.htmlElem.controllerElemId))||void 0===t||t.removeEventListener("wheel",this.zoomFn)},u.prototype.prepareChartData=function(t,e){this.minDate=t,this.maxDate=e,this.resetStatsRange()},u.prototype.prepareData3=function(t){this.stat2elem={};for(var e=[],n=0,i=this.settings.stats;n<i.length;n++){var s=i[n];e.push(s.name),e.push({type:"string",role:"tooltip",p:{html:!0}})}var a=[o(["instance no"],e,!0)],r=this.quantizeDateRange(this.statsRange1,this.statsRange2,this.IDEAL_SAMPLE_CNT),h=this.getQuantizedTime(r,!0).getTime();for(this.graphDates=[],this.putStatDataForRange(this.statsRange1,r,this.statsRange1,a);h<this.statsRange2;)this.putStatDataForRange(r,h,(r+h)/2,a),r=this.getQuantizedTime(r,!0).getTime(),h=this.getQuantizedTime(r,!0).getTime();this.putStatDataForRange(h,this.statsRange2,this.statsRange2,a),this.settings.events.statsRangeChanged(this.graphDates[0],this.graphDates[this.graphDates.length-1]),this.chartClient.drawDashboard(a),t&&this.chartClient.setControllerRange(t.start,t.end);var l=this.chartClient.getControllerRange(),g=l[0],c=l[1];this.settings.events.graphRangeChanged(g,c),this.setTicksForBarChart()},u.prototype.quantizeDateRange=function(t,e,i){var s=e-t,a=Number.MAX_SAFE_INTEGER,r="",o=Number.MAX_SAFE_INTEGER,h="";for(var l in n){var g=n[l],c=Math.round(s/g),u=Math.abs(c-i);u<a&&(a=u,r=l),u<o&&c>10&&(o=u,h=l)}return""!=h&&(r=h),this.currTimeUnit=n[r],this.selectedTimeUnit=r,this.getQuantizedTime(t,!0).getTime()},u.prototype.setTicksForBarChart=function(){var t=this.chartClient.getControllerRange(),e=t[0],n=t[1];e<this.statsRange1&&(e=this.statsRange1),n>this.statsRange2&&(n=this.statsRange2);for(var i=this.getQuantizedTime(e,!1).getTime(),s=[];i<=n;){var a=new Date(i);s.push({v:a,f:this.getTickStrForDate(a)}),i=this.getQuantizedTime(i,!0).getTime()}var r=new Date(i);s.push({v:r,f:this.getTickStrForDate(r)}),this.chartClient.setTicksForBarChart(s)},u.prototype.getQuantizedTime=function(t,e){var n=this.selectedTimeUnit,i=new Date(t),s=i.getFullYear(),a=i.getMonth()+1,r=i.getDate(),o=i.getHours(),h=i.getMinutes(),l=i.getSeconds(),g=i.getMilliseconds();if("decade"==n||"century"==n){var c="decade"==n?10:100,u=s-s%c;return e?new Date(u+c,0,1):new Date(u,0,1)}if("year"==n)return e?new Date(s+1,0,1):new Date(s,0,1);if("quarter"==n){u=3*Math.ceil(a/3)-2;return e?new Date(s,u+2,1):new Date(s,u,1)}if("month"==n)return e?new Date(s,a,1):new Date(s,a-1,1);if("week"==n){var p=(i.getDay()+6)%7;return e?new Date(s,a-1,r-p+7):new Date(s,a-1,r-p)}if("day"==n)return e?new Date(s,a-1,r+1):new Date(s,a-1,r);if("hour"==n)return e?new Date(s,a-1,r,o+1):new Date(s,a-1,r,o);if("5min"==n){var d=5*Math.floor(h/5);return e?new Date(s,a-1,r,o,d+5):new Date(s,a-1,r,o,d)}if("minute"==n)return e?new Date(s,a-1,r,o,h+1):new Date(s,a-1,r,o,h);if("5sec"==n){var m=5*Math.floor(l/5);return e?new Date(s,a-1,r,o,h,m+5):new Date(s,a-1,r,o,h,m)}if("second"==n)return e?new Date(s,a-1,r,o,h,l+1):new Date(s,a-1,r,o,h,l);if("50ms"==n){var f=50*Math.floor(g/50);return e?new Date(s,a-1,r,o,h,l,f+50):new Date(s,a-1,r,o,h,l,f)}if("ms"==n)return e?new Date(s,a-1,r,o,h,l,g+1):new Date(s,a-1,r,o,h,l,g);throw"unknown timeUnit: "+n},u.prototype.getTickStrForDate=function(t){return"decade"==this.selectedTimeUnit||"century"==this.selectedTimeUnit||"year"==this.selectedTimeUnit?""+t.getFullYear():"quarter"==this.selectedTimeUnit||"month"==this.selectedTimeUnit?""+(t.getMonth()+1):"week"==this.selectedTimeUnit||"day"==this.selectedTimeUnit?""+t.getDate():"hour"==this.selectedTimeUnit?""+t.getHours():"minute"==this.selectedTimeUnit||"5min"==this.selectedTimeUnit?""+t.getMinutes():"second"==this.selectedTimeUnit||"5sec"==this.selectedTimeUnit?""+t.getSeconds():"50ms"==this.selectedTimeUnit||"ms"==this.selectedTimeUnit?""+t.getMilliseconds():"?"},u.prototype.getToolTippedData=function(n,i){var s=this.selectedTimeUnit,a=new Date(n),r=a.getFullYear(),o=a.getMonth()+1,h=a.getDate(),l=a.getHours(),g=a.getMinutes(),c=a.getSeconds(),u=a.getMilliseconds(),p=[],d="";"century"==s&&(d=r+"-"+(r+100)),"decade"==s&&(d=r+"s"),"year"==s&&(d=r+""),"quarter"==s&&(d="Quarter "+Math.ceil(o/3)+" "+r),"month"==s&&(d=t[o-1]+" "+r),"week"==s&&(d="Week "+e[o-1]+" "+h),"day"==s&&(d="Day "+h),"hour"==s&&(d="Hour "+l),"minute"!=s&&"5min"!=s||(d="Minute "+g),"second"!=s&&"5sec"!=s||(d="Second "+c),"50ms"!=s&&"ms"!=s||(d="Millisecond "+u);for(var m=0,f=0,y=i;f<y.length;f++){var R=y[f];p.push(R),p.push('<div style="border:2px solid '+this.settings.stats[m++].color+';">'+d+" <b>"+R+"</b></div>")}return p},u.prototype.setStatsRangeByRatio=function(){var t=this.chartClient.getControllerRange(),e=t[0],n=t[1],a=(n+e)/2,r=n-e;r<this.MIN_ZOOM_RANGE&&(e=a-this.MIN_ZOOM_RANGE/2,n=a+this.MIN_ZOOM_RANGE/2,this.chartClient.setControllerRange(e,n),r=this.MIN_ZOOM_RANGE);var o=r/(2*this.settings.graphRangeRatio),h=this.statsRange1,l=this.statsRange2;this.statsRange1=a-o,this.statsRange2=a+o;var g=this.settings.globalRangeMin||i,c=this.settings.globalRangeMax||s;this.statsRange1<g&&(this.statsRange2+=g-this.statsRange1,this.statsRange1=g,this.setGraphRangeByRatio(h,l,!1)),this.statsRange2>c&&(this.statsRange1-=this.statsRange2-c,this.statsRange2=c,this.setGraphRangeByRatio(h,l,!0)),this.renderChart()},u.prototype.setGraphRangeByRatio=function(t,e,n){var i,s,a,r=this.statsRange2-this.statsRange1,o=e-t;r>o&&(i=r,s=o,void 0===a&&(a=1e3),!(Math.abs(i-s)<a))&&(n?this.statsRange1=t:this.statsRange2=e),this.setGraphRangeByStatsRange(this.statsRange1,this.statsRange2)},u.prototype.setGraphRangeByStatsRange=function(t,e){var n=(e-t)*(1-this.settings.graphRangeRatio)/2,i=t+n,s=e-n;this.chartClient.setControllerRange(i,s)},u.prototype.resetStatsRange=function(){this.statsRange1=this.minDate,this.statsRange2=this.maxDate},u.prototype.stopPlayTimer=function(t){t(!0),clearTimeout(this.playTimerId),this.playTimerId=-1},u.prototype.rangeChange=function(t){if(void 0===t&&(t=!0),this.items&&!(this.items.length<1)){this.setStatsRangeByRatio();var e=this.chartClient.getControllerRange(),n=e[0],i=e[1],s=this.getTimeFilteredGraphElems(n,i);if(s=this.settings.events.maintainFiltering(s),t&&(this.cursorPos=0),this.settings.isHideDisconnectedNodesOnAnim){for(var a=s.components().filter((function(t){return t.length<2})),r=this.cy.collection(),o=0;o<a.length;o++)r.merge(a[o].not(":parent"));s=s.not(r)}this.settings.events.showOnlyElems(s),this.selectedTimeUnit&&this.setTicksForBarChart()}},u.prototype.renderChart=function(t){var e=this.items,n=this.settings.stats;!e||e.length<1||!n||n.length<1?console.log("there is no data OR stat to render chart"):(this.prepareData3(t),this.chartClient.drawControl(),this.settings.events.chartRendered())},u.prototype.setIsEnabled=function(t){this.settings.isEnabled=t,this.unbindEventListeners(),this.unbindCommands(),this.removeChartListener(),t?(this.bindEventListeners(),this.windowResizer(),this.bindCommands(),this.addChartListener(),this.cyElemChangeHandler&&this.cyElemChangeHandler()):this.api.coverAllTimes(),this.settings.events.chartRendered()},u.prototype.setIsHideDisconnectedNodesOnAnim=function(t){this.settings.isHideDisconnectedNodesOnAnim=t,this.rangeChange(!1)},u.prototype.setIsIgnoreElemChanges=function(t){var e=this;t?this.settings.isIgnoreElemChanges=t:setTimeout((function(){e.settings.isIgnoreElemChanges=t}),200)},u.prototype.setIsMaintainGraphRange=function(t){this.settings.isMaintainGraphRange=t},u.prototype.setPlayingPeriod=function(t){this.settings.playingPeriod=t},u.prototype.setZoomingStep=function(t){this.settings.zoomingStep=1e-6*t*t+.00485*t+.005},u.prototype.setPlayingStep=function(t){this.settings.playingStep=t},u.prototype.setGraphInclusionType=function(t){if(t<0||t>2)throw"graphInclusionType is not defined";this.settings.graphInclusionType=t,this.rangeChange(!0)},u.prototype.setStatsInclusionType=function(t){if(t<0||t>3)throw"statsInclusionType is not defined";this.settings.statsInclusionType=t,this.renderChart()},u.prototype.setGlobalRangeMin=function(t){this.settings.globalRangeMin=t},u.prototype.setGlobalRangeMax=function(t){this.settings.globalRangeMax=t},u.prototype.setGraphRangeRatio=function(t){t<this.GRAPH_RANGE_RATIO_MIN&&(t=this.GRAPH_RANGE_RATIO_MIN),t>this.GRAPH_RANGE_RATIO_MAX&&(t=this.GRAPH_RANGE_RATIO_MAX),this.settings.graphRangeRatio=t},u.prototype.setDefaultBeginDate=function(t){this.settings.defaultBeginDate=t},u.prototype.setDefaultEndDate=function(t){this.settings.defaultEndDate=t},u}(),p=function(){function t(t,e,n,i){this._=new u(t,e,n,i,this),this.setSetting("zoomingStep",i.zoomingStep)}return t.prototype.changeZoom=function(t){if(this._.settings.isEnabled){var e=this.getGraphRange(),n=e[0],s=e[1],a=s-n;if(!(a<=this._.MIN_ZOOM_RANGE&&t)){var r=Math.floor(this._.settings.zoomingStep*a);t||(r=-r),s-=r,(n+=r)<=i||(this._.chartClient.setControllerRange(n,s),this._.rangeChange(!0))}}},t.prototype.getGraphRange=function(){return this._.chartClient.getControllerRange()},t.prototype.setGraphRange=function(t,e){this._.chartClient.setControllerRange(t,e),this._.rangeChange()},t.prototype.getStatsRange=function(){return[this._.statsRange1,this._.statsRange2]},t.prototype.moveCursor=function(t){if(this._.settings.isEnabled){var e=this.getGraphRange(),n=e[0],i=e[1],s=Math.ceil(i-n),a=Math.ceil(s*this._.settings.playingStep/100),r=this._.maxDate,o=this._.minDate;if(-1===this._.cursorPos&&t||1===this._.cursorPos&&!t)return!1;a>=n-o&&t?(i-=n-o,n=o,this._.cursorPos=-1):a>=r-i&&!t?(n=n+r-i,i=r,this._.cursorPos=1):t?(n-=a,i-=a,this._.cursorPos=0):t||(n+=a,i+=a,this._.cursorPos=0);var h=this._.graphDates[0],l=this._.graphDates[this._.graphDates.length-1];return n>=i&&(i=n+this._.currTimeUnit),n<=h&&(this._.statsRange2=this._.statsRange2+n-h,this._.statsRange1=n),i>=l&&(this._.statsRange1=this._.statsRange1+i-l,this._.statsRange2=i+1),this._.renderChart({start:n,end:i}),this._.rangeChange(!1),!0}},t.prototype.coverAllTimes=function(){this._.settings.isEnabled&&(this._.resetStatsRange(),this._.renderChart(),this._.chartClient.setControllerRange(this._.statsRange1,this._.statsRange2),this._.rangeChange(!0))},t.prototype.coverVisibleRange=function(){if(this._.settings.isEnabled){var t=this._.getVisibleRange(),e=t[0],n=t[1];n-e<=1&&(n=e+1e3),this._.resetStatsRange(),this._.renderChart(),this._.chartClient.setControllerRange(e,n),this._.rangeChange(!0)}},t.prototype.playTiming=function(t){var e=this;this._.settings.isEnabled&&(this._.playTimerId<0?(t(!1),this._.playTimerId=window.setInterval((function(){e.moveCursor(!1)?(t(!1),e._.chartClient.drawControl()):e._.stopPlayTimer(t)}),this._.settings.playingPeriod)):this._.stopPlayTimer(t))},t.prototype.setEventListener=function(t,e){this._.settings.events[t]=e},t.prototype.getCurrTimeUnit=function(){return this._.currTimeUnit},t.prototype.getGraphRangeRatio=function(){return this._.settings.graphRangeRatio},t.prototype.setGraphRangeRatio=function(t){this._.setGraphRangeRatio(t)},t.prototype.setStatsColors=function(t){this._.chartClient.colors=t;for(var e=0;e<this._.settings.stats.length;e++)this._.settings.stats[e].color=t[e];this._.chartClient.setColors()},t.prototype.setStats=function(t){t&&(this._.settings.stats=t,this._.chartClient.colors=t.map((function(t){return t.color})),this._.chartClient.setColors(),this._.renderChart())},t.prototype.setSetting=function(t,e){var n="set"+t.charAt(0).toUpperCase()+t.slice(1);this._[n](e)},t}();function d(t,e,n){return new p(this,t,e,n)}function m(t){t&&t("core","timebar",d)}void 0!==window.cytoscape&&m(window.cytoscape);export{m as default};
